<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RÃ©veillon 2026 - Test & Live</title>
    <style>
        body {
            background: #050505;
            color: white;
            font-family: 'Segoe UI', sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
            overflow: hidden;
            transition: background 0.1s;
        }

        #countdown {
            font-size: 8rem;
            font-weight: 900;
            text-align: center;
        }

        .controls {
            position: absolute;
            bottom: 30px;
            display: flex;
            gap: 15px;
        }

        button {
            padding: 15px 25px;
            font-size: 1rem;
            border: none;
            border-radius: 30px;
            cursor: pointer;
            font-weight: bold;
            transition: transform 0.2s;
        }

        #startBtn { background: #00ff88; color: black; }
        #testBtn { background: #333; color: white; border: 1px solid #555; }
        
        button:hover { transform: scale(1.05); }

        .happy-new-year {
            display: none;
            font-size: 5rem;
            text-align: center;
            background: linear-gradient(45deg, #f3ec78, #af4261);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: pulse 1s infinite alternate;
        }

        @keyframes pulse {
            from { transform: scale(1); }
            to { transform: scale(1.1); }
        }

        .flash { background: white !important; }
    </style>
</head>
<body>

    <div id="countdown">Cliquez sur DÃ©marrer</div>
    <div id="newYearMessage" class="happy-new-year">ðŸŽ† 2026 ðŸŽ†<br>BONNE ANNÃ‰E !</div>

    <div class="controls">
        <button id="startBtn">DÃ‰MARRER LE LIVE</button>
        <button id="testBtn">TESTER LE FINAL (10s)</button>
    </div>

    <script>
        const countdownEl = document.getElementById('countdown');
        const messageEl = document.getElementById('newYearMessage');
        const startBtn = document.getElementById('startBtn');
        const testBtn = document.getElementById('testBtn');
        
        let isTestMode = false;
        let testStartTime = 0;
        let voiceTriggered = {};

        function speak(text) {
            window.speechSynthesis.cancel(); // Stoppe la voix en cours pour Ã©viter les dÃ©calages
            const utter = new SpeechSynthesisUtterance(text);
            utter.lang = 'fr-FR';
            utter.rate = 1.2;
            window.speechSynthesis.speak(utter);
        }

        function update() {
            let diff;
            
            if (isTestMode) {
                const elapsed = (Date.now() - testStartTime) / 1000;
                diff = (11 - elapsed) * 1000; // Simule un dÃ©compte de 11 secondes
            } else {
                const now = new Date();
                const target = new Date('January 1, 2026 00:00:00');
                diff = target - now;
            }

            if (diff <= 0) {
                countdownEl.style.display = 'none';
                messageEl.style.display = 'block';
                if (!voiceTriggered['final']) {
                    speak("Bonne annÃ©e deux mille vingt-six !");
                    voiceTriggered['final'] = true;
                }
                return;
            }

            const secs = Math.floor(diff / 1000);
            const minutes = Math.floor(secs / 60);
            const displaySecs = secs % 60;

            countdownEl.innerText = (secs > 60) ? `${minutes}m ${displaySecs}s` : displaySecs;

            // Voix IA pour les 10 derniÃ¨res secondes
            if (secs <= 10 && secs > 0) {
                if (!voiceTriggered[secs]) {
                    speak(secs.toString());
                    voiceTriggered[secs] = true;
                    
                    // Effet visuel
                    document.body.classList.add('flash');
                    setTimeout(() => document.body.classList.remove('flash'), 100);
                }
            }
            
            requestAnimationFrame(update);
        }

        startBtn.onclick = () => {
            isTestMode = false;
            voiceTriggered = {};
            document.querySelector('.controls').style.display = 'none';
            update();
        };

        testBtn.onclick = () => {
            isTestMode = true;
            testStartTime = Date.now();
            voiceTriggered = {};
            messageEl.style.display = 'none';
            countdownEl.style.display = 'block';
            speak("Lancement du test");
            update();
        };
    </script>
</body>
</html>
