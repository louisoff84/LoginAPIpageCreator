<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RÃ©veillon Paris 2026</title>
    <style>
        body {
            background: #000;
            color: #fff;
            font-family: 'Courier New', Courier, monospace; /* Style horloge */
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
            overflow: hidden;
        }

        #timer-container { text-align: center; }

        #countdown {
            font-size: 10vw;
            font-weight: bold;
            color: #00ff88;
            text-shadow: 0 0 20px rgba(0, 255, 136, 0.5);
        }

        #ms {
            font-size: 4vw;
            color: #555;
            margin-left: 10px;
        }

        .city { font-size: 1.5rem; color: #888; margin-bottom: 20px; letter-spacing: 5px; }

        .controls { position: fixed; bottom: 30px; display: flex; gap: 10px; }
        
        button {
            padding: 15px 30px;
            border-radius: 5px;
            border: 1px solid #444;
            cursor: pointer;
            font-weight: bold;
            background: #222;
            color: white;
        }

        #startBtn { background: #00ff88; color: #000; border: none; }

        .happy-new-year {
            display: none;
            font-size: 6vw;
            text-align: center;
            color: gold;
            text-shadow: 0 0 50px orange;
            animation: celebrate 0.5s infinite alternate;
        }

        @keyframes celebrate { from { transform: scale(1); } to { transform: scale(1.05); } }
        .flash { background: white !important; }
    </style>
</head>
<body>

    <div class="city">PARIS / FRANCE</div>
    <div id="timer-container">
        <span id="countdown">--:--</span><span id="ms">000</span>
    </div>
    <div id="newYearMessage" class="happy-new-year">ðŸŽ† BONNE ANNÃ‰E 2026 ðŸŽ†</div>

    <div class="controls">
        <button id="startBtn">ACTIVER L'HEURE DE PARIS</button>
        <button id="testBtn">TEST (10s)</button>
    </div>

    <script>
        const countdownEl = document.getElementById('countdown');
        const msEl = document.getElementById('ms');
        const messageEl = document.getElementById('newYearMessage');
        const synth = window.speechSynthesis;
        
        let lastSecondTriggered = -1;
        let isTest = false;
        let testTarget = 0;

        function speak(text) {
            synth.cancel();
            const utter = new SpeechSynthesisUtterance(text);
            utter.lang = 'fr-FR';
            utter.rate = 1.2;
            synth.speak(utter);
        }

        function getParisTime() {
            // CrÃ©ation de la date cible : 1er Janvier 2026 00:00:00 Ã  Paris
            return new Date("2026-01-01T00:00:00+01:00").getTime();
        }

        function update() {
            const now = Date.now();
            const target = isTest ? testTarget : getParisTime();
            const diff = target - now;

            if (diff <= 0) {
                document.getElementById('timer-container').style.display = 'none';
                messageEl.style.display = 'block';
                if (lastSecondTriggered !== 0) {
                    speak("Bonne annÃ©e deux mille vingt-six !");
                    lastSecondTriggered = 0;
                }
                return;
            }

            const totalSeconds = Math.floor(diff / 1000);
            const milliseconds = Math.floor(diff % 1000);

            // Affichage principal
            const mins = Math.floor(totalSeconds / 60);
            const secs = totalSeconds % 60;
            
            countdownEl.innerText = `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
            msEl.innerText = milliseconds.toString().padStart(3, '0');

            // Logique vocale (10 derniÃ¨res secondes)
            if (totalSeconds <= 10 && totalSeconds !== lastSecondTriggered) {
                lastSecondTriggered = totalSeconds;
                speak(totalSeconds.toString());
                document.body.classList.add('flash');
                setTimeout(() => document.body.classList.remove('flash'), 80);
            }

            requestAnimationFrame(update);
        }

        document.getElementById('startBtn').onclick = () => {
            isTest = false;
            lastSecondTriggered = -1;
            document.querySelector('.controls').style.display = 'none';
            update();
        };

        document.getElementById('testBtn').onclick = () => {
            isTest = true;
            testTarget = Date.now() + 11000;
            lastSecondTriggered = -1;
            messageEl.style.display = 'none';
            document.getElementById('timer-container').style.display = 'block';
            speak("Test du fuseau Paris");
            update();
        };
    </script>
</body>
</html>
